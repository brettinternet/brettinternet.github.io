{"data":{"site":{"siteMetadata":{"siteRepo":"https://github.com/brettinternet/brettinternet.github.io","postBasePath":"/blog"}},"markdownRemark":{"id":"2d3cc72e-80a1-5950-96bf-4bf3c833d275","excerpt":"Firewall software might seem like a peculiar resource for a web developer to use, but I’ve found it to be an essential item on my developer tool belt…","html":"<p>Firewall software might seem like a peculiar resource for a web developer to use, but I’ve found it to be an essential item on my developer tool belt. Protecting your network interface is a critical section in this popular write-up <a href=\"https://github.com/forter/security-101-for-saas-startups/blob/english/security.md#antivirusfirewall\">Security 101</a>. OpenVPN, reverse proxy, traffic watch, and other addons make pfSense part of my personal DevOps.</p>\n<p>I used to work closely with a company’s sysadmin in a previous job.\nTogether with his help and some extensive research, I was able to harness a few of the wonderful open source tools that <a href=\"https://www.pfsense.org/\">pfSense</a> bundles together.\nThe <a href=\"https://forum.pfsense.org/\">community</a> is full of intelligent professionals. As with all technical forums, entry-level participation can be intimidating. Networking is also a difficult subject to learn and harder to practice, but I use my own home network as a playground to implement some concepts. While pfSense is indeed enterprise-level software, this walkthrough is for hobbyists.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f8f4f11f194e4294808fad6b4cf0d70/b9e4f/pfsense1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.40677966101696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACxElEQVQ4y32UaVMaQRCG989YQmFpcR8iyCX3sYiQJdxyLYoE5AaxyiqSgBzFp/zcNz2TYIyk8uGp2RmW7vft7llBrzegWq2iUqkgkUjA4XDASXiCAVz3O/A363DXSnDJZUjdL1ivVlh94PX1FbvdDrFYDMLp6Smi0ShtRAQCAZjNZo7j8hJpKY2A349LpxNGkwk6vR4mWo1G4wHsPyyWoNVqkcvliDwFjUKtVkOj1sBkMcMtxhBLS6jXZcRFEUFKGAqFEAwGD4hEItBTQkGr00GSJGSzWW7XQWpchJdeSrQauMql0X7sYDgcYjQa/RP222w2g5/cCEwRs8zssixMuo5UWy4u4C1kkK9V8dhu477ZxN3d3T9pNBpotVpckHB2dkYBY28BdTotr4We6iIW86g9PGBMKpq0JpNJpNNp7ugjmUwGFosFAitouVzmdby+jsNms8FutyNKwXebLXV1jc1mg+l0yu2Nx+MD2PkfyxoNb3c4HOEHLCDrpMfjQbfXQ6/X5zWSZRm1Wo0aVD+AnTPr3DKz5/P5eKfsFOzk5ATHx8ewnp+j1+1iPJlgMBig0+4gn89zCoXCX7Cz29tbWK1WCHqDgXc4m80hlUohTy+IND5WlxP3wz4W375jPp/j5eUFz8/PmPxOwFS/X5+enrgw3hT2wCy6nC64XC6eyUaDnaHMMs0gu0nFUgkNucGbwkrzfh73DvkcHh0d8WCRaBgBOoySOp/PS9ZVUCoV3L5CoeCwZ6VSCZVK9QYrEZsO1mm2F3RmDcqjz6hMMigOPiH7mIDUikGseZGQgxiM+2Rnxru8h9new/asHMvl8pdlm9uK6Y82+rt7dFZV+gBEkOqEke5FkOmJ+LqcY7Pe8I/Aer1+Y79n62KxwHa75UoFg8mISqOEYq0AKZeEL3KFq5Cb4yVidJ/j8ThEusv/4+bmho/bT7lFZLDSfuLgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"censors\"\n        title=\"\"\n        src=\"/static/0f8f4f11f194e4294808fad6b4cf0d70/b9e4f/pfsense1.png\"\n        srcset=\"/static/0f8f4f11f194e4294808fad6b4cf0d70/cf440/pfsense1.png 148w,\n/static/0f8f4f11f194e4294808fad6b4cf0d70/d2d38/pfsense1.png 295w,\n/static/0f8f4f11f194e4294808fad6b4cf0d70/b9e4f/pfsense1.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<figcaption>I can monitor my hardware from my pfSense dashboard</figcaption>\n<h2>Hardware</h2>\n<p>I’m using a retired, old computer from a previous job, but a bottle of canned air knocked off a couple of years from the old bulky metal frame.\nThis junker has two cores and 4GB of DDR3 RAM, but I’ve never had any issues with it on my gigabit network.\nIt’s big for what it does, so an Intel NUC might be better if space is a concern. The hardware requirements are minimal, but pfSense does offer <a href=\"https://www.pfsense.org/hardware/#requirements\">some recommendations</a> and <strong>dual NICs are required</strong>—you <em>must</em> have two ethernet ports for LAN and WAN.</p>\n<p>I’ve chosen to add an additional spindle disk for parity, but backing up your firewall config is very easy so this isn’t necessary.\nTogether with this inexpensive <a href=\"https://www.amazon.com/gp/product/B003CFATNI/ref=oh_aui_search_detailpage?ie=UTF8&#x26;psc=1\">TP-Link NIC</a> and a <a href=\"https://www.amazon.com/NETGEAR-GS105NA-Ethernet-Replacement-Unmanaged/dp/B0000BVYT3/\">network switch</a>, my old machine has been sufficient hardware for what I need.\nEventually, when I can afford to graduate my servers to a server rack, I’ll upgrade my firewall to a small, 1U case.</p>\n<h2>Software</h2>\n<p>The pfSense software is free and open source. You can <a href=\"https://pfsense.org/download/\">download it here</a> for your specific build and the easiest install is with a USB. Use <a href=\"https://rufus.akeo.ie/\">rufus</a>, <a href=\"https://github.com/resin-io/etcher/\">etcher</a> or <a href=\"http://unetbootin.github.io/\">unetbootin</a> to write the image to your USB.</p>\n<h3>Setup</h3>\n<p>The ultimate <a href=\"https://doc.pfsense.org/index.php/Installing_pfSense\">pfSense installation guide</a> is by the creators themselves on their wiki. But I’ll walk through my process here.</p>\n<p>Plug in your USB and boot up your machine. To enter the boot options menu, you usually press DEL, F8 or F12 as the BIOS splash screen appears depending on your hardware. You should then see the following screen:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/90880d937350012f1b2242c5f1cf416f/fb730/pfsense2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.87323943661972%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHCqxZAB//EABUQAQEAAAAAAAAAAAAAAAAAACAh/9oACAEBAAEFAov/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAACAwAAAAAAAAAAAAAAAAABEBEgUf/aAAgBAQABPyGNUK//2gAMAwEAAgADAAAAEIMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAIRAxQVH/2gAIAQEAAT8QqsWYQGmx7CuRBa5N8f/Z'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"setup\"\n        title=\"\"\n        src=\"/static/90880d937350012f1b2242c5f1cf416f/c739e/pfsense2.jpg\"\n        srcset=\"/static/90880d937350012f1b2242c5f1cf416f/8ee9c/pfsense2.jpg 148w,\n/static/90880d937350012f1b2242c5f1cf416f/ebbe7/pfsense2.jpg 295w,\n/static/90880d937350012f1b2242c5f1cf416f/c739e/pfsense2.jpg 590w,\n/static/90880d937350012f1b2242c5f1cf416f/fb730/pfsense2.jpg 710w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<figcaption>pfSense installation menu</figcaption>\n<p>Select <code class=\"language-text\">1</code> to begin the installation.\nThen, press <code class=\"language-text\">i</code> to launch the installer. In the following screens let’s go with the default configurations: <code class=\"language-text\">Accept these Settings</code>, then choose <code class=\"language-text\">Quick/Easy Install</code>.\nIf you’re an advanced user, you’d use ‘Custom Install’ to choose which disk to install to and partitioning setup.\nContinue through the setup and confirm the request to format and write your disk.</p>\n<p>Once the partitions are created and the kernel is installed, you’ll be prompted to reboot.\nYou can now eject your USB installer. When your pfSense machine reboots, you’ll now be prompted to setup your network interfaces.\nThe first option is for <code class=\"language-text\">VLAN</code> setup, but generally VLANs are for advanced networking and we don’t need it here.</p>\n<p>Next, you’ll set your <code class=\"language-text\">WAN</code> and <code class=\"language-text\">LAN</code> interfaces.\nDepending on your hardware, these interfaces can have different names—your interfaces may look like <code class=\"language-text\">em0</code>, <code class=\"language-text\">em1</code> or <code class=\"language-text\">bge0</code>, <code class=\"language-text\">ce0</code>.\nYou’ll need to assign the correct interface to the WAN and the other to the LAN interface.\nSelect the appropriate options and follow the prompts.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96df3c6291637f79eb48fe005bbdbcfa/41d60/pfsense3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 23.159509202453986%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABw4EB/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAQABBQJiyH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAARFB/9oACAEBAAE/IXSwjBB//9oADAMBAAIAAwAAABDzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABcQAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQEAAT8Qgkt1FS9yjzhv/9k='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"options\"\n        title=\"\"\n        src=\"/static/96df3c6291637f79eb48fe005bbdbcfa/c739e/pfsense3.jpg\"\n        srcset=\"/static/96df3c6291637f79eb48fe005bbdbcfa/8ee9c/pfsense3.jpg 148w,\n/static/96df3c6291637f79eb48fe005bbdbcfa/ebbe7/pfsense3.jpg 295w,\n/static/96df3c6291637f79eb48fe005bbdbcfa/c739e/pfsense3.jpg 590w,\n/static/96df3c6291637f79eb48fe005bbdbcfa/41d60/pfsense3.jpg 652w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>After setting up your network interfaces, you’ll now see an options menu on the CLI with numbers 1 through 14 or 15.\nIf you set up the interfaces correctly, you’ll see WAN and LAN IP addresses.\nYou should also see an <code class=\"language-text\">http://</code> IP address which you can access on the LAN network to view the pfSense GUI.\nThe default username and password should be <code class=\"language-text\">admin</code> and <code class=\"language-text\">pfsense</code>. If not, <a href=\"https://doc.pfsense.org/index.php/Installing_pfSense\">refer to the docs</a> for the latest credentials.\nYou should walk through the setup wizard to complete the installation.</p>\n<p>I’ll go over usage and some extra packages that I use with pfSense in the <a href=\"%7B%25%20post_url%202017-07-22-use-pfsense-as-a-developer%20%25%7D\">next post</a>.</p>","frontmatter":{"title":"Configure pfSense as a Developer - Part 1","date":"July 14, 2017","tags":["network","homelab","pfsense"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017-07-14-configure-pfsense-as-a-developer/","previous":null,"next":{"fields":{"slug":"/2017-07-22-use-pfsense-as-a-developer/"},"frontmatter":{"title":"Use pfSense as a Developer - Part 2"}}}}